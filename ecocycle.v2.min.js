var ecoCycle=function(n,t){function e(n,e){t.log&&console.log(r+" slide "+n),a(n,function(){f>1&&t.timeout&&(u=function(){c=setInterval(function(){o(e),a(v,function(){})},t.timeout)},u())})}function o(n){"prev"==n?0==v?v=(Math.ceil(f/t.groupBy)-1)*t.groupBy:v-=t.groupBy:v>=f-t.groupBy?v=0:v+=t.groupBy}function a(n,e){function o(e,o){for(var a=0;a<f;a++)null!=e[a]&&e[a].classList.remove("active");switch(o){case"dots":null!=e[n/t.groupBy]&&e[n/t.groupBy].classList.add("active");break;default:for(a=n;a<n+t.groupBy;a++)null!=e[a]&&e[a].classList.add("active")}}t.onChange(n,f-1,t),null!=d[n]&&imgLoadCheck(d[n].querySelector("[data-src]"),!1,function(){}),o(d,""),t.dots&&o(t.dotsContainer.children,"dots"),e()}function i(t){for(var e=document.createDocumentFragment();t.length;)e.appendChild(t[Math.floor(Math.random()*t.length)]);n.appendChild(e)}var r="ecocycle";this.defaults={childNodes:"",dots:!1,dotsChild:"<span></span>",dotsContainer:"."+r+"__dots",groupBy:1,log:!1,nav:!1,navChild:["<button>Prev</button>","<button>Next</button>"],navContainer:r+".__nav",onChange:function(n,t,e){},onReady:function(n){},pauseOnHover:!1,shuffle:!1,timeout:7e3};var l=null!=document.querySelector(n);if(l){for(var s in t)t.hasOwnProperty(s)&&(this.defaults[s]=t[s]);t=this.defaults;var c,u,d,v=0;n=document.querySelector(n),d=n.children,""!=t.childNodes&&(t.shuffle=!1,d=n.querySelectorAll(t.childNodes));var f=d.length;t.shuffle&&i(d)}this.init=function(){if(l){t.log&&console.log("initialized "+r),n.classList.add(r);for(var a=0;a<f;a++)d[a].classList.add(r+"__item");if(t.nav&&(t.navContainer=document.querySelector(t.navContainer),f>1&&(t.navContainer.classList.add(r+"__nav"),u("prev",t.navContainer,t.navChild[0],""),u("next",t.navContainer,t.navChild[1],""))),t.dots){t.dotsContainer=document.querySelector(t.dotsContainer),t.dotsContainer.classList.add(r+"__dots");for(a=0;a<f;a+=t.groupBy)u("dots",t.dotsContainer,t.dotsChild,a)}if(t.pauseOnHover){var i=this;n.addEventListener("mouseenter",function(){i.pause()}),n.addEventListener("mouseleave",function(){i.play()})}function s(n){var t=document.createElement("div");return t.innerHTML=n.trim(),t.firstChild}function u(n,t,a,i){var r=s(a);r.addEventListener("click",function(){clearInterval(c),c=null,"dots"==n?v=i:o(n),e(v,"next")},!1),t.appendChild(r)}t.onReady(t),this.play()}},this.play=function(){t.log&&console.log("play "+r),e(v,"next")},this.pause=function(){l&&(t.log&&console.log("pause "+r),clearInterval(c),c=null)},this.prev=function(){o("prev")},this.next=function(){o("next")},this.destroy=function(){if(t.log&&console.log("destroy "+r),l){clearInterval(c),c=null,n.classList.remove(r);for(var e=0;e<f;e++)d[e].classList.remove(r+"__item"),d[e].classList.remove("active");t.navContainer.innerHTML="",t.dotsContainer.innerHTML=""}}};