var ecoCycle=function(n,t){function e(n,e){t.log&&console.log(r+" slide "+n),a(n,function(){f>1&&t.timeout&&(d=function(){c=setInterval(function(){o(e),a(v,function(){})},t.timeout)},d())})}function o(n){"prev"==n?0==v?v=(Math.ceil(f/t.groupBy)-1)*t.groupBy:v-=t.groupBy:v>=f-t.groupBy?v=0:v+=t.groupBy}function a(n,e){function o(e,o){for(var a=0;a<f;a++)null!=e[a]&&e[a].classList.remove("active");switch(o){case"dots":null!=e[n/t.groupBy]&&e[n/t.groupBy].classList.add("active");break;default:for(a=n;a<n+t.groupBy;a++)null!=e[a]&&e[a].classList.add("active")}}t.onChange(n,f-1,t),null!=u[n]&&imgLoadCheck(u[n].querySelector("[data-src]"),!1,function(){}),o(u,""),t.dots&&o(t.dotsContainer.children,"dots"),e()}function i(t){for(var e=document.createDocumentFragment();t.length;)e.appendChild(t[Math.floor(Math.random()*t.length)]);n.appendChild(e)}var r="ecocycle";this.defaults={childNodes:"",dots:!1,dotsChild:"<span></span>",dotsContainer:"."+r+"__dots",groupBy:1,log:!1,nav:!1,navChild:["<button>Prev</button>","<button>Next</button>"],navContainer:r+".__nav",onChange:function(n,t,e){},onReady:function(n){},pauseOnHover:!1,shuffle:!1,timeout:7e3},n="object"==typeof n?n:document.querySelector(n);var s=null!=n;if(s){for(var l in t)t.hasOwnProperty(l)&&(this.defaults[l]=t[l]);t=this.defaults;var c,d,u,v=0;u=n.children,""!=t.childNodes&&(t.shuffle=!1,u=n.querySelectorAll(t.childNodes));var f=u.length;t.shuffle&&i(u)}this.init=function(){if(s){t.log&&console.log("initialized "+r),n.classList.add(r);for(var a=0;a<f;a++)u[a].classList.add(r+"__item");if(t.nav&&("object"==typeof t.navContainer?t.navContainer=t.navContainer:t.navContainer=document.querySelector(t.navContainer),f>1&&(t.navContainer.classList.add(r+"__nav"),d("prev",t.navContainer,t.navChild[0],""),d("next",t.navContainer,t.navChild[1],""))),t.dots){"object"==typeof t.dotsContainer?t.dotsContainer=t.dotsContainer:t.dotsContainer=document.querySelector(t.dotsContainer),t.dotsContainer.classList.add(r+"__dots");for(a=0;a<f;a+=t.groupBy)d("dots",t.dotsContainer,t.dotsChild,a)}if(t.pauseOnHover){var i=this;n.addEventListener("mouseenter",function(){i.pause()}),n.addEventListener("mouseleave",function(){i.play()})}function l(n){var t=document.createElement("div");return t.innerHTML=n.trim(),t.firstChild}function d(n,t,a,i){var r=l(a);r.addEventListener("click",function(){clearInterval(c),c=null,"dots"==n?v=i:o(n),e(v,"next")},!1),t.appendChild(r)}t.onReady(t),this.play()}},this.play=function(){t.log&&console.log("play "+r),e(v,"next")},this.pause=function(){s&&(t.log&&console.log("pause "+r),clearInterval(c),c=null)},this.prev=function(){o("prev")},this.next=function(){o("next")},this.destroy=function(){if(t.log&&console.log("destroy "+r),s){clearInterval(c),c=null,n.classList.remove(r);for(var e=0;e<f;e++)u[e].classList.remove(r+"__item"),u[e].classList.remove("active");t.navContainer.innerHTML="",t.dotsContainer.innerHTML=""}}};